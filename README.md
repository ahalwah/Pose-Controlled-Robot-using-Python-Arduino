# Pose-Controlled-Robot-using-Python-Arduino

Setting up the arduinos (x2) and bluetooth modules (HC-05 x2):

1. Upload the hc-05_AT_MODE code to the arduino, then wire up the hc-05 to the arduino using the hc-05 setup fritzing diagram for guidance. Before connecting the 5V pin to the vcc pin on the module, press the button on the bluetooth module and let it go only when you have connecte the wires and you see slow blinking. Remember to do this for the 2nd module when you hook it up too. Bear in mind this only needs to be done for this step and not for normal wiring. Open up the serial monitor to fetch the address of the bluetooth module using the following commands. First, however, make sure the baud rate in the serial monitor is set to 9600 and that you are in Both NL & CR mode. Now we will fetch information for this module which we have chosen to be the slave module. In the serial monitor enter "AT" and you should get the following message: OK. "AT+UART?" returns the baud rate. "AT+ROLE?" which should return "+ROLE=0" signifying that this module is in slave mode. TO get the address, input "AT+ADDR?" and write the address somewhere because you will need it in the next step. Unplug this module and plug in your 2nd bluetooth module using the same setup. Proceed with the same steps, opening the serial moniteor and trying the commands, "AT" and "AT+UART?" to check you are getting good responses. Next, by typing “AT+ROLE=1” we will set the Bluetooth module as a master device. After this using the “AT+CMODE=0” we will set the connect mode to “fixed address” and using the “AT+BIND=” command we will set the address of the slave device that we previously wrote down.
2. Using the hc-05 setup diagram, connect an arduino to the slave module, then upload the arduino_comp code to it. Wire up the 2nd arduino using the car fritizng diagram and upload the arduino_car code to it.

Training the Network and Controlling the Car:

1. Navigate to the sketch in this link: https://editor.p5js.org/amro.halwah/sketches/ez_jiVsq8. The data collection sketch is used to collect the data that we will use to train the model. Decide which poses you would like your model to recognize, and take the number of these poses and edit line 44 to reflect that. My number of outputs is 5 because I trained it to recognize 5 different poses for my project, but for your project this may vary so adjust it to the number you desire. Run the sketch. Input a string into the textbox and press enter, then walk back to stand in full view of the camera (you are given 5 seconds after pressing enter before the program starts collecting data of you position on the screen). When the program starts collecting data, it will be logged in the console that it is collecting and after 10 seconds it will inform you that it is not collecting. For these 10 seconds hold that pose infront of the camera and move around to introduce a diverse set of points for training your model. You do this for the number of outputs you selected in line 44 of the code, and when you are done type 'save' without the quotations and press enter. A json file will download to your computer, reanme it to data.json and you are ready to train your model.
2. Open the network.py file from the Python Files folder and change the path name to the directory in which your data.json file is. Open the posenet.py file and change the port to the port you are arduino is connected to. If you are unsure about the port you can use the arduino ide to find out. Simply go to tools, port, then you should be able to tell which port the arduino is connected to. Run the posenet file and the car should be moving in response to tyour pose on camera. The string predicted for your pose can also be seen in the top left corner of the video window.
